<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{{ url_for('static', filename = 'pylogolight.png') }}" type="image/x-icon" />
    <title>Online Python Compiler</title>
    <link rel="stylesheet"  href="{{ url_for('static', filename = 'index.css') }}">
    <link
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        rel="stylesheet"/>
</head>
<body>
    <div class="navbar-container">
        <img src="{{ url_for('static', filename = 'pylogolight.png') }}" alt="PY Logo">
        <h2 style="margin-left: 5px;">Online Python Compiler</h2>
    </div>
    <div class="container">
        <form  id="codefile" action="" method="post" enctype="multipart/form-data">
            <div class="code-option-container">
                <div class="code-options" id="mode1">
                    <div class="py-button" onclick="codeoptions('editer')">
                        <i class="fas fa-code" style="font-size: 20px;"></i>
                    </div>
                    <div class="py-button" onclick="codeoptions('upload')">
                        <i class="far fa-folder-open" style="font-size: 20px;"></i>
                    </div>
                    <div class="py-button" id="py-button-left" onclick="screenlight()">
                        <i class="far fa-sun" style="font-size: 20px;"></i>
                    </div>
                    <div class="py-button" id="py-button-left" onclick="screendark()"  style="margin-right: 50px;">
                        <i class="fas fa-moon" style="font-size: 20px;"></i>
                    </div>
                    <div class="py-button" id="py-button-left" style="margin-right: 100px;width: 50px;">
                        <i class="fas fa-font" style="font-size: 20px;margin-right: 5px;"></i>
                        <select id="select1" onchange="fontsize()">
                            <option value="14">14</option>
                            <option value="16">16</option>
                            <option value="18">18</option>
                            <option value="20">20</option>
                            <option value="22">22</option>
                            <option value="24">24</option>
                            <option value="26">26</option>
                            <option value="28">28</option>
                        </select>
                    </div>
                </div>
                <div class="code">
                    <div class="upload-code-file" id="mode2">
                        <input type='file' name="file1"  id="aa" onchange="pressed()" hidden>
                        <label for="aa" style="font-size: 20px;">
                            <i class="far fa-folder-open" style="font-size: 150px;cursor: pointer; color: rgb(80, 78, 78);"></i>
                        </label>
                        <h3><label for="aa" id="fileLabel">
                           Choose File
                        </label></h3>
                        <br>
                        <div class="py-button" onclick="submitcodefile()" id="submit-button" style="width: 100px;">
                            <i class="fas fa-check-circle" style="font-size: 20px;"></i>
                            <p style="margin-left: 5px;font-size: 20px;">Upload</p>
                        </div>
                    </div>
                    <div class="code-container" id="mode3">
                        {% for k, v in data.items() %} 
                            {% if k == "code" %}
                                <textarea name="codetext">{% for i in v %}{{ i }}{% endfor %}</textarea>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                <div class="code-submit-container" id="mode4">
                    <div class="py-button" onclick="submitcode()" id="submit-button" style="width: 80px;">
                        <i class="fab fa-centercode" style="font-size: 20px;"></i>
                        <p style="margin-left: 5px;font-size: 20px;">Run</p>
                    </div>
                </div>
            </div>
                <div class="output-container">
                    <div class="output-options" id="mode5">
                        <div class="py-button" onclick="inputoption('output')">
                            <i class="fas fa-terminal" style="font-size: 20px;"></i>
                        </div>
                        <div class="py-button" onclick="inputoption('enterinput')">
                            <i class="far fa-keyboard" style="font-size: 20px;"></i>
                        </div>
                        <div class="py-button" onclick="inputoption('upload')">
                            <i class="far fa-folder-open" style="font-size: 20px;"></i>
                        </div>
                    </div>
                    <div class="output">
                        <div class="upload-input-file" id="mode6">
                            <input type='file' name="file2" id="outpressed" onchange="outpressedfun()" hidden>
                            <label for="aa" style="font-size: 20px;">
                                <i class="far fa-folder-open" style="font-size: 75px;cursor: pointer; color: rgb(80, 78, 78);"></i>
                            </label>
                            <h3><label for="outpressed" id="fileLabe2">
                                Choose file
                            </label></h3>
                            <br>
                            <div class="py-button" onclick="submitinputfile()" id="submit-button" style="width: 80px;">
                                <i class="fas fa-check-circle" style="font-size: 16px;"></i>
                                <p style="margin-left: 5px;font-size: 16px;">Upload</p>
                            </div>
                        </div>
                        <div class="take-input" id="mode7">
                            {% for k, v in data.items() %} 
                                {% if k == "input" %} 
                                <textarea name="inputtext">{% for i in v %}{{ i }}{% endfor %}</textarea>  
                                {% endif %}
                            {% endfor %}
                        </div>
                        <div class="display-output" id="mode8">
                            {% for k, v in data.items() %} 
                                {% if k == "output" %}
                                {% for i in v %}
                                    <p><b>{{ i }}</p></b>
                                {% endfor %}
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div> 
                </div>
        </form>
    </div>

    <script>
        var textareas = document.getElementsByTagName('textarea');
        var count = textareas.length;
        for(var i=0;i<count;i++){
            textareas[i].onkeydown = function(e){
                if(e.keyCode==9 || e.which==9){
                    e.preventDefault();
                    var s = this.selectionStart;
                    this.value = this.value.substring(0,this.selectionStart) + "\t" + this.value.substring(this.selectionEnd);
                    this.selectionEnd = s+1; 
                }
            }
        }
        window.pressed = function(){
            var a = document.getElementById('aa');
            if(a.value == "")
            {
                fileLabel.innerHTML = "Choose file";
            }
            else
            {
                var theSplit = a.value.split('\\');
                fileLabel.innerHTML = theSplit[theSplit.length-1];
            }
        };

        window.outpressedfun = function(){
            var a = document.getElementById('outpressed');
            if(a.value == "")
            {
                fileLabe2.innerHTML = "Choose file";
            }
            else
            {
                var theSplit = a.value.split('\\');
                fileLabe2.innerHTML = theSplit[theSplit.length-1];
            }
        };

        function codeoptions(opt){
            if (opt == "editer"){
                document.getElementsByClassName("code-container")[0].style.display = "block";
                document.getElementsByClassName("upload-code-file")[0].style.display = "none";
            }
            else if (opt == "upload"){
                document.getElementsByClassName("code-container")[0].style.display = "none";
                document.getElementsByClassName("upload-code-file")[0].style.display = "flex";
            }
        }

        function inputoption(opt){
            if (opt == "upload"){
                document.getElementsByClassName("upload-input-file")[0].style.display = "flex";
                document.getElementsByClassName("take-input")[0].style.display = "none";
                document.getElementsByClassName("display-output")[0].style.display = "none";
            }
            else if (opt == "output"){
                document.getElementsByClassName("upload-input-file")[0].style.display = "none";
                document.getElementsByClassName("take-input")[0].style.display = "none";
                document.getElementsByClassName("display-output")[0].style.display = "block";
            }
            else if (opt == "enterinput"){
                document.getElementsByClassName("upload-input-file")[0].style.display = "none";
                document.getElementsByClassName("take-input")[0].style.display = "block";
                document.getElementsByClassName("display-output")[0].style.display = "none";
            }
        }
        function submitcode(){
            document.getElementById("codefile").action = "/compile";
            document.getElementById("codefile").submit();
        }
        function submitcodefile(){
            document.getElementById("codefile").action = "/uploadfile/code";
            document.getElementById("codefile").submit();
        }
        function submitinputfile(){
            document.getElementById("codefile").action = "/uploadfile/input";
            document.getElementById("codefile").submit();
        }

        function fontsize(){
            var fontsize = document.getElementById("select1").value;
            var textareas = document.getElementsByTagName('textarea');
            var count = textareas.length;
            for(var i=0;i<count;i++){
                textareas[i].style.fontSize = fontsize;
            }
        }

        function screendark(){
            document.getElementsByTagName("body")[0].style.backgroundColor = "rgb(10, 10, 10)";
            document.getElementsByTagName("body")[0].style.color = "white";
            document.getElementsByTagName("body")[0].style.transition = "all 0.5s";
            document.getElementsByTagName("body")[0].style.transitionTimingFunction = "ease-in-out";
            document.getElementsByClassName("navbar-container")[0].style.backgroundColor = "black";
            document.getElementsByTagName("textarea")[0].style.backgroundColor = "rgb(32, 31, 31)";
            document.getElementsByTagName("textarea")[0].style.color = "white";
            document.getElementsByTagName("textarea")[1].style.backgroundColor = "rgb(32, 31, 31)";
            document.getElementsByTagName("textarea")[1].style.color = "white";
            document.getElementById("mode1").style.backgroundColor = "rgb(32, 31, 31)";
            document.getElementById("mode2").style.backgroundColor = "rgb(32, 31, 31)";
            document.getElementById("mode3").style.backgroundColor = "rgb(32, 31, 31)";
            document.getElementById("mode4").style.backgroundColor = "rgb(32, 31, 31)";
            document.getElementById("mode5").style.backgroundColor = "rgb(32, 31, 31)";
            document.getElementById("mode6").style.backgroundColor = "rgb(32, 31, 31)";
            document.getElementById("mode7").style.backgroundColor = "rgb(32, 31, 31)";
            document.getElementById("mode8").style.backgroundColor = "rgb(32, 31, 31)";
            document.getElementById("select1").style.backgroundColor = "rgb(32, 31, 31)";
            document.getElementById("select1").style.color = "white";
            document.getElementsByClassName("display-output")[0].style.backgroundColor = "black";
        }
        function screenlight(){
            document.getElementsByTagName("body")[0].style.backgroundColor = "white";
            document.getElementsByTagName("body")[0].style.color = "black";
            document.getElementsByTagName("body")[0].style.transition = "all 0.5s";
            document.getElementsByTagName("body")[0].style.transitionTimingFunction = "ease-in-out";
            document.getElementsByClassName("navbar-container")[0].style.backgroundColor = "#2f64ea";
            document.getElementsByTagName("textarea")[0].style.backgroundColor = "white";
            document.getElementsByTagName("textarea")[0].style.color = "black";
            document.getElementsByTagName("textarea")[1].style.backgroundColor = "white";
            document.getElementsByTagName("textarea")[1].style.color = "black";
            document.getElementById("mode1").style.backgroundColor = "white";
            document.getElementById("mode2").style.backgroundColor = "white";
            document.getElementById("mode3").style.backgroundColor = "white";
            document.getElementById("mode4").style.backgroundColor = "white";
            document.getElementById("mode5").style.backgroundColor = "white";
            document.getElementById("mode6").style.backgroundColor = "white";
            document.getElementById("mode7").style.backgroundColor = "white";
            document.getElementById("mode8").style.backgroundColor = "white";
            document.getElementById("select1").style.backgroundColor = "white";
            document.getElementById("select1").style.color = "black";
            document.getElementsByClassName("display-output")[0].style.backgroundColor = "white";
        }
    </script>
</body>
</html>